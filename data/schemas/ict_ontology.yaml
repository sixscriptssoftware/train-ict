# ICT Trading Ontology - Standard Vocabulary
# All scripts/analysis must use these exact terms and definitions

version: "2.0"
updated: "2026-01-20"

# =============================================================================
# MARKET CONTEXT
# =============================================================================
market_context:
  trend_state:
    bullish: "HTF making higher highs and higher lows"
    bearish: "HTF making lower highs and lower lows"
    ranging: "Price consolidating between defined levels"
  
  session:
    asia: "8:00 PM - 12:00 AM EST"
    london: "2:00 AM - 5:00 AM EST (killzone)"
    ny_am: "7:00 AM - 10:00 AM EST (killzone)"
    ny_lunch: "12:00 PM - 1:00 PM EST (avoid)"
    ny_pm: "1:30 PM - 4:00 PM EST"
    london_close: "10:00 AM - 12:00 PM EST"
  
  htf_bias:
    description: "Direction determined by Daily/4H structure"
    values: ["bullish", "bearish", "neutral"]

# =============================================================================
# MARKET STRUCTURE
# =============================================================================
structures:
  swing_high:
    definition: "Local price peak with lower highs on both sides"
    significance: "Potential resistance / BSL target"
  
  swing_low:
    definition: "Local price trough with higher lows on both sides"
    significance: "Potential support / SSL target"
  
  bos:
    full_name: "Break of Structure"
    definition: "Price closes beyond previous swing high/low"
    rule: "Body must close beyond level, not just wick"
  
  choch:
    full_name: "Change of Character"
    definition: "First break of structure against prevailing trend"
    significance: "Potential trend reversal signal"
  
  structure_break:
    valid: "Body closes beyond level AND sustains"
    invalid: "Flash wick beyond level = stop hunt, not real break"
  
  range_high:
    definition: "Upper boundary of consolidation"
    contains: "Buy-side liquidity (BSL)"
  
  range_low:
    definition: "Lower boundary of consolidation"
    contains: "Sell-side liquidity (SSL)"
  
  terminus:
    definition: "Final objective of market maker model - PREDETERMINED"
    rule: "Identified BEFORE price reaches it, not after"
    location: "Discount PD arrays (buys) or premium PD arrays (sells)"
  
  prior_distribution:
    definition: "Previous selling zone that becomes accumulation on reversal"
    rule: "What buys will sell, what sells will buy"
  
  origination_displacement:
    definition: "Zone where the move originated"
    rule: "If price falls below this = thesis invalid, move is done"

# =============================================================================
# LIQUIDITY
# =============================================================================
liquidity:
  bsl:
    full_name: "Buy-Side Liquidity"
    location: "Above swing highs, equal highs, range highs"
    contains: "Stop losses from shorts, breakout buy orders"
    status: ["unswept", "swept"]
  
  ssl:
    full_name: "Sell-Side Liquidity"
    location: "Below swing lows, equal lows, range lows"
    contains: "Stop losses from longs, breakout sell orders"
    status: ["unswept", "swept"]
  
  equal_highs:
    definition: "2+ swing highs at approximately same level"
    significance: "Liquidity pool - NOT resistance"
    rule: "Functional similarity, not exact pip match"
  
  equal_lows:
    definition: "2+ swing lows at approximately same level"
    significance: "Liquidity pool - NOT support"
    rule: "2-3 candles at same area = licking chops"
  
  irl:
    full_name: "Internal Range Liquidity"
    components: ["FVG", "liquidity_void", "order_block"]
    use: "ENTRY points within current dealing range"
  
  erl:
    full_name: "External Range Liquidity"
    components: ["equal_highs", "equal_lows", "old_swing_highs", "old_swing_lows"]
    use: "TARGET for internal range entries"
  
  sweep:
    definition: "Price takes liquidity level then reverses"
    nature: "Fluid process that is DESTINED, not violent"
    confirmation: "20-30 pips through level, could be wick or body"

# =============================================================================
# PD ARRAYS (Price Delivery Arrays)
# =============================================================================
pd_arrays:
  fvg:
    full_name: "Fair Value Gap"
    definition: "Gap between candle 1 high/low and candle 3 high/low"
    measurement: "From WICKS, not bodies"
    priority: "Higher than OB - algorithm returns to THE VOID"
    entry_rule: "Just needs to touch 50% to continue"
    status: ["unmitigated", "mitigated"]
    mitigated_when: "Any candle after formation touches 50% level"
  
  order_block:
    full_name: "Order Block"
    bullish: "Last DOWN candle before displacement up"
    bearish: "Last UP candle before displacement down"
    entry: "50% of OB candle (midpoint)"
    stop: "Below OB specifically, not entire FVG"
  
  imbalance:
    definition: "Same as FVG - price moved too fast, needs rebalancing"
    buy_side_imbalance: "= Sell side inefficiency"
    sell_side_imbalance: "= Buy side inefficiency"
  
  premium:
    definition: "Price above equilibrium (50%) of range"
    action: "Look to SELL in premium zones"
  
  discount:
    definition: "Price below equilibrium (50%) of range"
    action: "Look to BUY in discount zones"
  
  mitigation_block:
    definition: "Zone where prior orders need to be closed out"
    forms: "After balanced price range interaction"

# =============================================================================
# TIMING
# =============================================================================
timing:
  cbdr:
    full_name: "Central Bank Dealers Range"
    time: "2:00 PM - 8:00 PM EST"
    ideal_range: "<40 pips (preferably 20-30)"
    rule: "Track BEFORE session, don't trade DURING"
    tight_cbdr: "Signals expansion coming"
  
  asia_range:
    time: "8:00 PM - 12:00 AM EST"
    significance: "More important than CBDR for expansion thesis"
    rule: "SD levels predetermined before London/NY"
  
  killzone:
    london: "2:00 AM - 5:00 AM EST"
    ny_am: "7:00 AM - 10:00 AM EST"
    significance: "Prime trading windows"
  
  judas_swing:
    definition: "Fake move opposite to true direction"
    timing: "100% time-based - happens at London open"
    purpose: "Traps counter-trend traders, grabs liquidity"
    rule: "Must occur during specific time window to qualify"
  
  session_open:
    london: "2:00 AM EST"
    ny: "8:00 AM EST"
    cme: "8:20 AM EST (significant)"
  
  optimal_trade_days:
    best: ["Tuesday", "Wednesday"]
    good: ["Monday", "Thursday"]
    avoid: ["Friday"]

# =============================================================================
# MODEL STAGES (AMD)
# =============================================================================
model_stages:
  accumulation:
    definition: "Smart money building positions in range"
    appearance: "Consolidation, equal highs/lows forming"
    action: "Wait - don't enter yet"
  
  manipulation:
    definition: "False move to grab liquidity"
    appearance: "Judas swing, sweep of levels"
    action: "Prepare for entry after sweep completes"
  
  distribution:
    definition: "Real move delivering to target"
    appearance: "Displacement, strong directional move"
    action: "Enter on retracement to FVG/OB"

# =============================================================================
# ENTRY MODELS
# =============================================================================
entry_models:
  ob_fvg_retrace:
    sequence: ["BOS", "displacement", "FVG+OB forms", "retrace to 50%", "continuation"]
    entry: "50% of OB inside FVG"
    stop: "Below OB"
  
  judas_into_ob:
    sequence: ["session_open", "false_move", "sweep_liquidity", "displacement", "OB_tap"]
    entry: "OB after Judas completes"
    timing: "Must be during London open"
  
  ltf_refinement:
    trigger: "Late on HTF entry"
    action: "Drop to 5M, find next PDA that promotes HTF bias"
    rule: "LTF PDA must align with HTF direction"
  
  cbdr_asia_sd:
    name: "Ashton's Signature Model"
    conditions: ["terminus_identified", "tight_cbdr", "asia_sd_confluence"]
    entry: "At ASIA SD zone"
    confirmation: "Tight CBDR signals expansion"

# =============================================================================
# VALIDATION RULES
# =============================================================================
validation:
  re_entry_valid:
    condition: "Price stays above origination displacement zone"
    meaning: "Structure holding = thesis still valid"
  
  re_entry_invalid:
    condition: "Price falls below origination displacement zone"
    meaning: "Structure broken = move is done"
  
  fvg_valid:
    condition: "Unmitigated - price has NOT returned since formation"
  
  fvg_invalid:
    condition: "Mitigated - price already touched 50%"

# =============================================================================
# MULTI-TIMEFRAME HIERARCHY
# =============================================================================
timeframe_hierarchy:
  htf_bias:
    timeframes: ["D", "4H"]
    purpose: "Determine overall direction"
    identifies: ["premium_discount", "major_ob", "terminus", "weekly_range"]
    rule: "Trade WITH HTF bias, never against"
  
  mtf_bridge:
    timeframes: ["1H", "15M"]
    purpose: "Refine HTF zones into tradeable areas"
    identifies: ["intermediate_structure", "refined_ob", "session_range", "fvg_clusters"]
    rule: "Must align with HTF, provides entry zones"
  
  ltf_execution:
    timeframes: ["5M", "1M"]
    purpose: "Precise entry timing and confirmation"
    identifies: ["micro_structure", "entry_ob", "entry_fvg", "confirmation_shift"]
    rule: "Execute here only when MTF/HTF aligned"
  
  alignment_states:
    full_alignment: "All TFs pointing same direction - highest probability"
    partial_alignment: "HTF clear, MTF developing - wait or reduced size"
    no_alignment: "Conflicting signals - no trade"

# =============================================================================
# SESSION BEHAVIOR PATTERNS
# =============================================================================
session_behaviors:
  asia:
    typical_action: "Sets the range for the day"
    characteristics: ["consolidation", "range_formation", "liquidity_building"]
    trap_type: "False breakouts that London reverses"
    trade_bias: "Mark levels, don't trade breakouts"
  
  london:
    typical_action: "Expansion - breaks Asia range"
    characteristics: ["judas_swing", "true_direction_reveal", "liquidity_sweep"]
    trap_type: "Judas at open traps counter-trend"
    trade_bias: "Trade with the move after Judas"
  
  ny_am:
    typical_action: "Continues London OR reverses if extended"
    characteristics: ["continuation", "reversal_if_overextended", "news_volatility"]
    trap_type: "News spike reversals"
    trade_bias: "If London trend intact, continue; else wait"
  
  ny_pm:
    typical_action: "Consolidation or final push to daily target"
    characteristics: ["profit_taking", "final_distribution", "range_return"]
    trap_type: "Late day fakeouts"
    trade_bias: "Partials or stay out unless clear structure"
  
  day_flow_pattern:
    normal: "Asia accumulates → London manipulates → NY distributes"
    reversal: "London overextends → NY reverses to Asia range"
    trend: "Asia tight → London/NY same direction = trend day"

# =============================================================================
# TRADE MANAGEMENT
# =============================================================================
trade_management:
  risk_models:
    fixed_percent:
      description: "Risk X% of account per trade"
      typical: "0.5% - 2%"
    
    fixed_dollar:
      description: "Risk fixed $ amount"
      use_case: "Prop firm daily loss limits"
  
  partial_strategies:
    scale_out:
      description: "Close portions at targets"
      example: "50% at 2R, 25% at 3R, 25% runner"
    
    all_or_nothing:
      description: "Full position to target or stop"
      use_case: "When high conviction + tight stop"
  
  stop_management:
    initial: "Set at invalidation level"
    breakeven: "Move to entry after 1R achieved (optional)"
    trailing: "Move below/above new swing points"
    never: "Never widen stop - only tighten or leave"
  
  outcome_tags:
    win_tp: "Hit take profit target"
    win_partials: "Closed in profit via partial exits"
    win_manual: "Closed early for profit (structure shift)"
    breakeven: "Moved stop to entry, got stopped"
    loss_structure: "Lost due to structure shift against"
    loss_stop: "Clean stop hit at invalidation"
    loss_mistake: "Loss due to rule violation"

# =============================================================================
# NARRATIVE REASONING
# =============================================================================
narrative_reasoning:
  why_here:
    description: "Why is THIS price level significant?"
    examples:
      - "Liquidity above equal highs into HTF premium OB"
      - "50% of unmitigated 4H FVG at ASIA SD"
      - "15M OB formed at prior distribution zone"
  
  why_now:
    description: "Why is THIS moment the right time?"
    examples:
      - "London open Judas into discount OB"
      - "NY AM continuation, Asia range broken clean"
      - "Post-CPI sweep of stops into HTF demand"
  
  what_would_kill_it:
    description: "What invalidates this thesis?"
    examples:
      - "HTF low taken + body close below 15M OB"
      - "Price returns below origination displacement"
      - "Correlation pair (GBPJPY) makes new low"

# =============================================================================
# ANTI-PATTERNS (What NOT to trade)
# =============================================================================
anti_patterns:
  false_ob:
    looks_like: "Order block formed before move"
    problem: "No displacement after - just consolidation"
    lesson: "OB requires displacement to validate"
  
  chased_move:
    looks_like: "Entered after missing retrace"
    problem: "No return to PD array, extended price"
    lesson: "If you miss it, wait for next setup"
  
  asia_breakout_trap:
    looks_like: "Breakout of Asia range before London"
    problem: "Often retraces into range during London"
    lesson: "Don't trade Asia breakouts, wait for London"
  
  fvg_already_mitigated:
    looks_like: "FVG touched but didn't hold"
    problem: "Already served its purpose, spent"
    lesson: "Once mitigated, FVG is used up"
  
  fighting_htf:
    looks_like: "LTF setup against HTF bias"
    problem: "Counter-trend scalp with bad odds"
    lesson: "LTF must promote HTF, never oppose"
  
  news_gamble:
    looks_like: "Entry right before high-impact news"
    problem: "Stop hunted both directions"
    lesson: "Wait for news spike, then assess structure"
  
  revenge_trade:
    looks_like: "Immediate re-entry after stop loss"
    problem: "Emotional, not structural justification"
    lesson: "If structure invalidated, wait for NEW setup"
  
  overtrading:
    looks_like: "3+ trades same session without edge"
    problem: "Forcing setups that don't exist"
    lesson: "One good trade > five mediocre trades"

# =============================================================================
# ENVIRONMENT & REGIME
# =============================================================================
environment:
  volatility_regime:
    high:
      description: "VIX elevated, news-driven, wide ranges"
      adjustment: "Wider stops, smaller size, faster targets"
    normal:
      description: "Standard market conditions"
      adjustment: "Standard playbook applies"
    low:
      description: "Compressed ranges, slow grind"
      adjustment: "Avoid or use tighter targets"
  
  news_context:
    high_impact:
      events: ["FOMC", "NFP", "CPI", "Rate Decision"]
      rule: "No new entries 30 min before/after"
      opportunity: "Post-news structure can be clean"
    medium_impact:
      events: ["PMI", "Retail Sales", "GDP"]
      rule: "Reduce size, widen stops"
    low_impact:
      rule: "Trade normally"
  
  day_types:
    trend_day:
      characteristics: "One direction, minimal pullbacks"
      action: "Hold runners, add on pullbacks"
    range_day:
      characteristics: "Chop between levels, no follow-through"
      action: "Fade extremes, quick targets"
    reversal_day:
      characteristics: "Strong move then full retracement"
      action: "Take profits, don't assume continuation"
  
  regime_flags:
    - vol_regime: ["high", "normal", "low"]
    - news_today: ["high_impact", "medium_impact", "none"]
    - day_type: ["trend", "range", "reversal", "unknown"]
    - correlation: ["aligned", "divergent", "neutral"]
